"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _iterableToArrayLimit(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,o,r,i,s=[],c=!0,d=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=r.call(n)).done)&&(s.push(a.value),s.length!==e);c=!0);}catch(t){d=!0,o=t}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw o}}return s}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(l){!1!==window.hasOwnProperty("statikCommon")&&(window.statikCommon=window.statikCommon||{},window.statikCommon.instance={debug:parseInt(window.statikCommon.config.debug),$wrapper:l(document).find("#statik"),$multipleSelects:l(document).find("#statik select[data-multiple]"),$passwordInputs:l(document).find("#statik div:has(> input.statik-is-password)"),$repeaters:l(document).find("#statik .js-repeater-wrapper"),$confirm:l(document).find("#statik .js-confirm-wrapper"),handleAsyncSelectsFields:function(){window.statikCommon.instance.$wrapper.find("select[data-async]").each(function(t,e){var n=l(e),a=n.data("current-value"),o=n.parent();l.ajax({url:n.data("async"),method:"GET",beforeSend:function(t){o.addClass("loading"),t.setRequestHeader("X-WP-Nonce",window.statikCommon.config.nonce)},error:function(t){return window.statikCommon.instance.debug&&console.log(t)},success:function(t){"object"===_typeof(t)&&t.forEach(function(t){t.value===a&&(t.selected=!0),n.append(l("<option>",t))}),n.attr("data-disabled")||n.removeAttr("disabled")},complete:function(){return o.removeClass("loading")}})})},handleMultipleSelects:function(){0!==window.statikCommon.instance.$multipleSelects.length&&(l("<link/>",{rel:"stylesheet",type:"text/css",href:"".concat(window.statikCommon.config.assetsUrl,"/stylesheets/vendors/selectize-0.15.2.min.css")}).appendTo("head"),l.getScript("".concat(window.statikCommon.config.assetsUrl,"/javascripts/vendors/jquery-ui-1.13.2.min.js"),function(){l.getScript("".concat(window.statikCommon.config.assetsUrl,"/javascripts/vendors/selectize-0.15.2.min.js"),function(){window.statikCommon.instance.$multipleSelects.each(function(t,e){var n=l(e).data("validation"),a=1===l(e).data("create");l(e).selectize({plugins:["remove_button","drag_drop"],delimiter:",",persist:!1,mode:"multi",create:a&&function(t){return!("string"==typeof n&&!RegExp(n).test(t))&&{value:t,text:t}}})})})}))},handlePasswordField:function(){0!==window.statikCommon.instance.$passwordInputs.length&&window.statikCommon.instance.$passwordInputs.on("click",function(t){t=l(t.target);"INPUT"===t.prop("tagName")&&t.val("").removeAttr("disabled").removeAttr("placeholder").focus()})},handleRepeaters:function(){0!==window.statikCommon.instance.$repeaters.length&&(window.statikCommon.instance.$repeaters.on("click",".js-add-row",function(t){t.preventDefault();var t=l(t.currentTarget).closest(".js-repeater-wrapper"),e=t.find(".js-fields-wrapper .js-repeater-row:last-of-type").data("key")||0;t.find(".js-fields-wrapper").append(t.find(".js-template").html().replace(/data-template-name/g,"name").replace(/data-template-required/g,"required").replace(/template-key/g,e+1))}),window.statikCommon.instance.$repeaters.on("click",".js-remove-row",function(t){t.preventDefault(),l(t.currentTarget).closest(".js-repeater-row").remove()}))},handleSettingsSelect:function(){window.statikCommon.instance.$wrapper.on("change","#nav-select",function(t){window.location.href=t.currentTarget.value})},handleConditionsFieldset:function(){function t(){var t=window.statikCommon.instance.$wrapper.find(".statik-grid-row[data-conditions]"),d=window.statikCommon.instance.$wrapper.find(".statik-generator[data-namespace]").data("namespace");t.each(function(t,e){for(var e=l(e),n=Object.entries(e.data("conditions")),a=[],o=0,r=n;o<r.length;o++){var i=_slicedToArray(r[o],2),s=i[0],i=i[1],c=void 0,c="!"===s.substring(s.length-1)&&(s=s.substring(0,s.length-1),!0),s=window.statikCommon.instance.$wrapper.find('[name="'.concat(d,"[").concat(s,']"]'));s.length&&(s.is(":checkbox")?a.push(c?s.is(":checked")!==!!i:s.is(":checked")===!!i):a.push(c?s.val()!==i:s.val()===i))}a.filter(function(t){return t}).length===n.length?(e.css("display","grid"),e.find("input, select, textarea").each(function(t,e){e=l(e);e.attr("required",e.attr("data-required")).removeAttr("data-required").attr("name",e.attr("data-name")).removeAttr("data-name")})):(e.css("display","none"),e.find("input, select, textarea").each(function(t,e){e=l(e);e.attr("data-required",e.attr("required")).removeAttr("required").attr("data-name",e.attr("name")).removeAttr("name")}))})}window.statikCommon.instance.$wrapper.on("change","form",t),t()},handleConfirm:function(){0!==window.statikCommon.instance.$confirm.length&&(l("<link/>",{rel:"stylesheet",type:"text/css",href:"".concat(window.statikCommon.config.assetsUrl,"/stylesheets/vendors/jquery-confirm-3.3.4.min.css")}).appendTo("head"),l.getScript("".concat(window.statikCommon.config.assetsUrl,"/javascripts/vendors/jquery-confirm-3.3.4.min.js")))}},window.statikCommon.instance.handleAsyncSelectsFields(),window.statikCommon.instance.handleMultipleSelects(),window.statikCommon.instance.handlePasswordField(),window.statikCommon.instance.handleRepeaters(),window.statikCommon.instance.handleSettingsSelect(),window.statikCommon.instance.handleConditionsFieldset(),window.statikCommon.instance.handleConfirm())}(window.jQuery);